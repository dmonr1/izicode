<div class="cont-general" [ngStyle]="{ 'background-color': fondoActual }">
  <!-- Mensaje inicial -->
  <p class="mensaje" *ngIf="!avatarVisible && !pantallaInundada">
    <span class="linea" [class.cursor]="showCursor1">{{ typedLine1 }}</span><br />
    <span class="linea-2" [class.cursor]="showCursor2">{{ typedLine2 }}</span><br />
    <span class="autor" [class.visible]="showAuthor">— Pablo Neruda</span>
  </p>

  <!-- Botón de corazón (solo si aún no se muestran avatares ni inundación) -->
  <div class="boton-corazon" *ngIf="!avatarVisible && !pantallaInundada" [class.visible]="showButton" (click)="expandirCirculo()">
    <button nz-button nzShape="circle" nzType="default">
      <span nz-icon nzType="heart" nzTheme="fill" style="color: #eb2f96;"></span>
    </button>
  </div>

  <!-- Avatares visibles -->
  <div class="carousel-container" *ngIf="avatarVisible && !pantallaInundada && !mostrarPregunta">
    <div
      *ngFor="let avatar of visibleAvatars; let i = index"
      class="avatar-wrapper"
      [ngClass]="{ 'center': i === 1, 'side': i !== 1 }"
      (click)="avatarSeleccionado(i)"
    >
      <div
        class="avatar-circle"
        [ngClass]="{
          'circle-center': i === 1,
          'circle-side': i !== 1,
          'circle-expand-center': avatarVisible && i === 1,
          'circle-expand-side': avatarVisible && i !== 1
        }"
      ></div>

      <img
        [src]="avatar"
        [ngClass]="{
          'avatar-img-center': i === 1,
          'avatar-img-side': i !== 1,
          'avatar-fade-center': avatarVisible && i === 1,
          'avatar-fade-side': avatarVisible && i !== 1
        }"
      />
    </div>
  </div>

  <!-- Texto de selección de avatar -->
  <p class="mensaje-seleccion" *ngIf="avatarVisible && !pantallaInundada && !mostrarPregunta">
    Selecciona el avatar según cómo te sientes
  </p>

  <!-- Efecto de inundación -->
  <div class="pantalla-inundacion" *ngIf="pantallaInundada && !mostrarPregunta"></div>

  <!-- Pregunta con input -->
  <div class="contenedor-pregunta" *ngIf="mostrarPregunta">
    <h2 class="pregunta-texto">¿Qué estás sintiendo ahora?</h2>
    <input type="text" placeholder="Escribe tu respuesta..." class="input-respuesta" />
  </div>
</div>
